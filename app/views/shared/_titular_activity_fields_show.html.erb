<% if !article.titularActivity.nil? && !article.titularActivity[0].nil? && !article.titularActivity[0].titular.empty? %>
  <h4>Data stewards post project or for entire lifetime of the data</h5>
  <% article.titularActivity[0].titular.each_with_index do |c, c_index| %>
    <% if !c.agent[0].name.empty? and !c.agent[0].roleHeldBy.empty? %>
      <p><span class="h6">Held by:</span> <%=link_to c.agent[0].name.first, c.agent[0].roleHeldBy.first %></p>
    <% elsif !c.agent[0].name.empty? %>
      <p><span class="h6">Held by:</span> <%= c.agent[0].name.first %></p>
    <% end %>
    <% if c.role.any? %>
      <% roles = c.role.reject { |role| role.blank? } %>
      <% roles = roles.map {|role| Sufia.config.role_labels[role] || role} %>
      <% if roles.any? %>
        <p><span class="h6">Role:</span>
           <span><%= roles.join(", ") %></span>
        </p>
      <% end %>
    <% end %>
    <% if !c.agent[0].affiliation.empty? %>
      <p><span class="h6">Affiliation:</span> 
      <% c.agent[0].affiliation.each do |c2| %>
        <% if !c2.name.empty? and !c2.sameAs.empty? %>
          <%=link_to c2.name.first, c2.sameAs.first %>, 
        <% elsif c2.name %>
          <%= c2.name.first %>, 
        <% end %>
      <% end %>
      </p>
    <% end %>
    <br/>
  <% end %>
<% end %>

